<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Troubleshooting ¬∑ Unitful.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="Unitful.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Unitful.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../highlights/">Highlighted features</a></li><li><a class="tocitem" href="../types/">Types</a></li><li><a class="tocitem" href="../newunits/">Defining new units</a></li><li><a class="tocitem" href="../conversion/">Conversion/promotion</a></li><li><a class="tocitem" href="../manipulations/">Manipulating units</a></li><li><a class="tocitem" href="../display/">How units are displayed</a></li><li><a class="tocitem" href="../logarithm/">Logarithmic scales</a></li><li><a class="tocitem" href="../temperature/">Temperature scales</a></li><li><a class="tocitem" href="../dates/">Interoperability with <code>Dates</code></a></li><li><a class="tocitem" href="../extending/">Extending Unitful</a></li><li class="is-active"><a class="tocitem" href>Troubleshooting</a><ul class="internal"><li><a class="tocitem" href="#Why-do-unit-conversions-yield-rational-numbers-sometimes?"><span>Why do unit conversions yield rational numbers sometimes?</span></a></li><li><a class="tocitem" href="#Exponentiation"><span>Exponentiation</span></a></li><li><a class="tocitem" href="#Promotion-with-dimensionless-numbers"><span>Promotion with dimensionless numbers</span></a></li><li><a class="tocitem" href="#Broken-display-of-dimension-characters-in-the-REPL"><span>Broken display of dimension characters in the REPL</span></a></li><li><a class="tocitem" href="#I-have-a-different-problem"><span>I have a different problem</span></a></li></ul></li><li><a class="tocitem" href="../LICENSE/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Troubleshooting</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Troubleshooting</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PainterQubits/Unitful.jl/blob/master/docs/src/trouble.md" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Troubleshooting"><a class="docs-heading-anchor" href="#Troubleshooting">Troubleshooting</a><a id="Troubleshooting-1"></a><a class="docs-heading-anchor-permalink" href="#Troubleshooting" title="Permalink"></a></h1><h2 id="Why-do-unit-conversions-yield-rational-numbers-sometimes?"><a class="docs-heading-anchor" href="#Why-do-unit-conversions-yield-rational-numbers-sometimes?">Why do unit conversions yield rational numbers sometimes?</a><a id="Why-do-unit-conversions-yield-rational-numbers-sometimes?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-do-unit-conversions-yield-rational-numbers-sometimes?" title="Permalink"></a></h2><p>We use rational numbers in this package to permit exact conversions between different units where possible. As an example, one inch is exactly equal to 2.54 cm. However, in Julia, the floating-point <code>2.54</code> is not equal to <code>254//100</code>. As a consequence, <code>1inch != 2.54cm</code>, because Unitful respects exact conversions. To test for equivalence, instead use <code>‚âà</code> (<code>\approx</code> tab-completion).</p><h3 id="But-I-want-a-floating-point-number..."><a class="docs-heading-anchor" href="#But-I-want-a-floating-point-number...">But I want a floating point number...</a><a id="But-I-want-a-floating-point-number...-1"></a><a class="docs-heading-anchor-permalink" href="#But-I-want-a-floating-point-number..." title="Permalink"></a></h3><p><code>float(x)</code> is defined for <a href="../types/#Unitful.Quantity"><code>Unitful.Quantity</code></a> types, and is forwarded to the underlying numeric type (units are not affected).</p><p>We may consider adding an option in the defaults to turn on/off use of <code>Rational</code> numbers. They permit exact conversions, but they aren&#39;t preferred as a result type in much of Julia Base (consider that <code>inv(2) === 0.5</code>, not <code>1//2</code>).</p><h2 id="Exponentiation"><a class="docs-heading-anchor" href="#Exponentiation">Exponentiation</a><a id="Exponentiation-1"></a><a class="docs-heading-anchor-permalink" href="#Exponentiation" title="Permalink"></a></h2><p>Most operations with this package should in principle suffer little performance penalty if any at run time. An exception to this is rule is exponentiation. Since units and their powers are encoded in the type signature of a <a href="../types/#Unitful.Quantity"><code>Unitful.Quantity</code></a> object, raising a <code>Quantity</code> to some power, which is just some run-time value, necessarily results in different result types. This type instability could impact performance:</p><pre><code class="language-julia-repl hljs">julia&gt; square(x) = (p = 2; x^p)
square (generic function with 1 method)</code></pre><p>In Julia, constant literal integers are lowered specially for exponentiation. (See Julia PR <a href="https://github.com/JuliaLang/julia/pull/20530">#20530</a> for details.) In this case, type stability can be maintained:</p><pre><code class="language-julia-repl hljs">julia&gt; square(x) = x^2
square (generic function with 1 method)</code></pre><p>Because the functions <code>inv</code>, <code>sqrt</code>, and <code>cbrt</code> are raising a <code>Quantity</code> to a fixed power (-1, 1/2, and 1/3, respectively), we can use a generated function to ensure type stability in these cases. Also note that squaring a <code>Quantity</code> can be type-stable if done as <code>x*x</code>.</p><h2 id="Promotion-with-dimensionless-numbers"><a class="docs-heading-anchor" href="#Promotion-with-dimensionless-numbers">Promotion with dimensionless numbers</a><a id="Promotion-with-dimensionless-numbers-1"></a><a class="docs-heading-anchor-permalink" href="#Promotion-with-dimensionless-numbers" title="Permalink"></a></h2><p>Most of the time, you are only permitted to do sensible operations in Unitful. With dimensionless numbers, some of the safe logic breaks down. Consider for instance that <code>Œºm/m</code> and <code>rad</code> are both dimensionless units, but kind of have nothing to do with each other. It would be a little weird to add them. Nonetheless, we permit this to happen since they have the same dimensions. Otherwise, we would have to special-case operations for two dimensionless quantities rather than dispatching on the empty dimension.</p><p>The result of addition and subtraction with dimensionless but unitful numbers is always a pure number with no units. With angles, <code>1 rad</code> is essentially just <code>1</code>, giving sane behavior:</p><pre><code class="language-julia-repl hljs">julia&gt; œÄ/2*u&quot;rad&quot;+90u&quot;¬∞&quot;
3.141592653589793</code></pre><h2 id="Broken-display-of-dimension-characters-in-the-REPL"><a class="docs-heading-anchor" href="#Broken-display-of-dimension-characters-in-the-REPL">Broken display of dimension characters in the REPL</a><a id="Broken-display-of-dimension-characters-in-the-REPL-1"></a><a class="docs-heading-anchor-permalink" href="#Broken-display-of-dimension-characters-in-the-REPL" title="Permalink"></a></h2><p>On some terminals with some fonts, dimension characters such as <code>ùêå</code> are displayed as an empty box. Setting a wider font spacing in your terminal settings can solve this problem.</p><h2 id="I-have-a-different-problem"><a class="docs-heading-anchor" href="#I-have-a-different-problem">I have a different problem</a><a id="I-have-a-different-problem-1"></a><a class="docs-heading-anchor-permalink" href="#I-have-a-different-problem" title="Permalink"></a></h2><p>Please raise an issue. This package is in development and there may be bugs. Feature requests may also be considered and pull requests are welcome.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../extending/">¬´ Extending Unitful</a><a class="docs-footer-nextpage" href="../LICENSE/">License ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 21 March 2023 11:20">Tuesday 21 March 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
