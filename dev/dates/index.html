<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Interoperability with Dates ¬∑ Unitful.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img class="docs-light-only" src="../assets/logo.svg" alt="Unitful.jl logo"/><img class="docs-dark-only" src="../assets/logo-dark.svg" alt="Unitful.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Unitful.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../highlights/">Highlighted features</a></li><li><a class="tocitem" href="../types/">Types</a></li><li><a class="tocitem" href="../newunits/">Defining new units</a></li><li><a class="tocitem" href="../conversion/">Conversion/promotion</a></li><li><a class="tocitem" href="../manipulations/">Manipulating units</a></li><li><a class="tocitem" href="../display/">How units are displayed</a></li><li><a class="tocitem" href="../logarithm/">Logarithmic scales</a></li><li><a class="tocitem" href="../temperature/">Temperature scales</a></li><li class="is-active"><a class="tocitem" href>Interoperability with <code>Dates</code></a><ul class="internal"><li><a class="tocitem" href="#Support-for-Dates.FixedPeriods"><span>Support for <code>Dates.FixedPeriod</code>s</span></a></li><li><a class="tocitem" href="#Support-for-Dates.CompoundPeriods"><span>Support for <code>Dates.CompoundPeriod</code>s</span></a></li></ul></li><li><a class="tocitem" href="../extending/">Extending Unitful</a></li><li><a class="tocitem" href="../trouble/">Troubleshooting</a></li><li><a class="tocitem" href="../LICENSE/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Interoperability with <code>Dates</code></a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Interoperability with <code>Dates</code></a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PainterQubits/Unitful.jl/blob/master/docs/src/dates.md" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Interoperability-with-the-Dates-standard-library"><a class="docs-heading-anchor" href="#Interoperability-with-the-Dates-standard-library">Interoperability with the <code>Dates</code> standard library</a><a id="Interoperability-with-the-Dates-standard-library-1"></a><a class="docs-heading-anchor-permalink" href="#Interoperability-with-the-Dates-standard-library" title="Permalink"></a></h1><p><a href="https://docs.julialang.org/en/v1/stdlib/Dates/">Julia&#39;s <code>Dates</code> standard library</a> provides data types for representing specific points in time <code>Date</code>/<code>DateTime</code> and differences between them, i.e., periods. Unitful provides methods for using period types from the <code>Dates</code> standard library together with <code>Quantity</code>s.</p><h2 id="Support-for-Dates.FixedPeriods"><a class="docs-heading-anchor" href="#Support-for-Dates.FixedPeriods">Support for <code>Dates.FixedPeriod</code>s</a><a id="Support-for-Dates.FixedPeriods-1"></a><a class="docs-heading-anchor-permalink" href="#Support-for-Dates.FixedPeriods" title="Permalink"></a></h2><p>The <code>Dates.FixedPeriod</code> union type includes all <code>Dates.Period</code>s that represent a fixed period of time, i.e., <code>Dates.Week</code>, <code>Dates.Day</code>, <code>Dates.Hour</code>, <code>Dates.Minute</code>, <code>Dates.Second</code>, <code>Dates.Millisecond</code>, <code>Dates.Microsecond</code>, and <code>Dates.Nanosecond</code>. These types can be converted to <code>Quantity</code>s or used in place of them.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>Dates.Year</code> does not represent a fixed period and cannot be converted to a <code>Quantity</code>. While Unitful&#39;s <code>yr</code> unit is exactly equal to 365.25 days, a <code>Dates.Year</code> may contain 365 or 366 days.</p></div></div><p>Each <code>FixedPeriod</code> is considered equivalent to a <code>Quantity</code>. For example, <code>Dates.Millisecond(5)</code> corresponds to the quantity <code>Int64(5)*u&quot;ms&quot;</code>. A <code>FixedPeriod</code> can be converted to the equivalent <code>Quantity</code> with a constructor:</p><article class="docstring"><header><a class="docstring-binding" id="Unitful.Quantity-Tuple{Union{Day, Hour, Microsecond, Millisecond, Minute, Nanosecond, Second, Week}}" href="#Unitful.Quantity-Tuple{Union{Day, Hour, Microsecond, Millisecond, Minute, Nanosecond, Second, Week}}"><code>Unitful.Quantity</code></a> ‚Äî <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Quantity(period::Dates.FixedPeriod)</code></pre><p>Create a <code>Quantity</code> that corresponds to the given <code>period</code>. The numerical value of the resulting <code>Quantity</code> is of type <code>Int64</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using Dates: Second

julia&gt; Quantity(Second(5))
5 s</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PainterQubits/Unitful.jl/blob/07eed0a733d9508713dc6fa3fc54f2a15ed5ca85/src/dates.jl#L41-L55">source</a></section></article><p>In most respects, <code>FixedPeriod</code>s behave like their equivalent quantities. They can be converted to other units using <code>uconvert</code>, used in arithmetic operations with other quantities, and they have a <code>unit</code> and <code>dimension</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; using Dates: Hour

julia&gt; p = Hour(3)
3 hours

julia&gt; uconvert(u&quot;s&quot;, p)
10800 s

julia&gt; p == 180u&quot;minute&quot;
true

julia&gt; p &lt; 1u&quot;d&quot;
true

julia&gt; 5u&quot;s&quot; + p
10805 s

julia&gt; 210u&quot;km&quot; / p
70.0 km hr^-1

julia&gt; unit(p) === u&quot;hr&quot;
true

julia&gt; dimension(p)
ùêì</code></pre><p>Conversely, a <code>FixedPeriod</code> can be created from a quantity using the appropriate constructor, <code>convert</code>, or <code>round</code> methods. This will fail (i.e., throw an <code>InexactError</code>) if the resulting value cannot be represented as an <code>Int64</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; using Dates: Day, Hour, Millisecond

julia&gt; Millisecond(1.5u&quot;s&quot;)
1500 milliseconds

julia&gt; convert(Hour, 1u&quot;yr&quot;)
8766 hours

julia&gt; Day(1u&quot;yr&quot;)
ERROR: InexactError: Int64(1461//4)
[...]

julia&gt; round(Day, 1u&quot;yr&quot;)
365 days</code></pre><h2 id="Support-for-Dates.CompoundPeriods"><a class="docs-heading-anchor" href="#Support-for-Dates.CompoundPeriods">Support for <code>Dates.CompoundPeriod</code>s</a><a id="Support-for-Dates.CompoundPeriods-1"></a><a class="docs-heading-anchor-permalink" href="#Support-for-Dates.CompoundPeriods" title="Permalink"></a></h2><p>The <code>Dates</code> standard library provides the <code>Dates.CompoundPeriod</code> type to represent sums of periods of different types:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Dates: Day, Second</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Day(5) + Second(1)</code><code class="nohighlight hljs ansi" style="display:block;">5 days, 1 second</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; typeof(ans)</code><code class="nohighlight hljs ansi" style="display:block;">Dates.CompoundPeriod</code></pre><p>Unitful provides facilities to work with <code>CompoundPeriod</code>s as long as they consist only of <code>FixedPeriod</code>s. Such <code>CompoundPeriod</code>s can be converted to <code>Quantity</code>s using <code>convert</code>, <code>uconvert</code>, or <code>round</code>:</p><pre><code class="language- hljs">julia&gt; using Dates: Day, Second

julia&gt; p = Day(5) + Second(1)
5 days, 1 second

julia&gt; uconvert(u&quot;s&quot;, p)
432001//1 s

julia&gt; convert(typeof(1.0u&quot;yr&quot;), p)
0.01368928562374832 yr

julia&gt; round(u&quot;d&quot;, p)
5//1 d

julia&gt; q = Month(1) + Day(1)  # Month is not a fixed period
1 month, 1 day

julia&gt; uconvert(u&quot;s&quot;, q)
ERROR: MethodError: no method matching Quantity{Rational{Int64},ùêì,Unitful.FreeUnits{(s,),ùêì,nothing}}(::Month)
[...]</code></pre><p>However, not all operations that are defined for <code>FixedPeriod</code>s support <code>CompoundPeriod</code>s as well. The reason for that is that a <code>CompoundPeriod</code> does not correspond to a specific unit:</p><pre><code class="language- hljs">julia&gt; p = Day(365) + Hour(6)
365 days, 6 hours

julia&gt; unit(p)  # A CompoundPeriod does not have a corresponding unit ...
ERROR: MethodError: no method matching unit(::Dates.CompoundPeriod)
[...]

julia&gt; dimension(p)  # ... but it does have a dimension
ùêì

julia&gt; Quantity(p)  # As a result, there is no Quantity type associated with it ...
ERROR: MethodError: no method matching Quantity(::Int64)
[...]

julia&gt; T = typeof(1.0u&quot;hr&quot;); T(p)  # ... but it can be converted to a concrete time quantity
8766.0 hr</code></pre><p>Consequently, any operation whose result would depend on the input unit is not supported by <code>CompoundPeriod</code>s. For example:</p><ul><li><code>+(::Quantity, ::CompoundPeriod)</code> and <code>+(::CompoundPeriod, ::Quantity)</code> error, since the unit of the result depends on the units of both arguments.</li><li><code>div(::Quantity, ::CompoundPeriod)</code> and <code>div(::CompoundPeriod, ::Quantity)</code> work, since the result is a dimensionless number.</li><li><code>mod(::CompoundPeriod, ::Quantity)</code> works, but <code>mod(::Quantity, ::CompoundPeriod)</code> does not, since the second argument determines the unit of the returned quantity.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../temperature/">¬´ Temperature scales</a><a class="docs-footer-nextpage" href="../extending/">Extending Unitful ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Sunday 30 July 2023 11:27">Sunday 30 July 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
